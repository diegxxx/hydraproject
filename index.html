<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>HeavxnDev - Portafolio</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
<link href="images/hell.jpg" rel="icon" type="image/x-icon"/>
<style>
    /* Estilos necesarios para el fondo de código */
    #matrix-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: #0a0a0a;
    }
    body { margin: 0; overflow-x: hidden; }
</style>
</head>
<body>

<canvas id="matrix-canvas"></canvas>

<div class="container">
<header class="profile-card card">
    <div class="profile-avatar-container">
    <img alt="Minecraft Head" class="profile-avatar" src="https://mc-heads.net/avatar/diegxxx/100" loading="lazy"/>
    </div>
<div class="profile-details">
<div class="nametag" id="nametag">
<span class="nick" id="nick-label">HeavxnDev</span>
<div class="rank-selector">
<select id="rank-select">
<option value="owner">OWNER</option>
<option value="manager">MANAGER</option>
<option value="dev">DEV</option>
</select>
<span class="rank owner" id="rank-label">OWNER</span>
</div>
</div>
<p class="profile-description">Staff &amp; Developer</p>
<div class="discord-status">
<div class="discord-avatar-container">
<img alt="Avatar de Discord" class="discord-icon" id="discordAvatar" src="https://cdn.discordapp.com/embed/avatars/0.png"/>
<div class="discord-status-indicator" id="discordStatusIndicator"></div>
</div>
<div class="discord-subtext" id="discordSubtext">Cargando...</div>
</div>
</div>
</header>
<nav class="nav-grid">
<a class="nav-card card" href="aboutme.html"><i class="fas fa-user"></i><span>Sobre mí</span></a>
<a class="nav-card card" href="projects.html"><i class="fas fa-laptop-code"></i><span>Proyectos</span></a>
<a class="nav-card card" href="servers.html"><i class="fas fa-server"></i><span>Servidores</span></a>
<a class="nav-card card" href="contact.html"><i class="fas fa-envelope"></i><span>Contacto</span></a>
</nav>
<footer class="social-links">
<a class="social-link" href="https://discord.com/users/852696161738293258" target="_blank"><i class="fab fa-discord"></i></a>
<a class="social-link" href="https://github.com/diegxxx" target="_blank"><i class="fab fa-github"></i></a>
</footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- EFECTO CÓDIGO CAYENDO (MATRIX) ---
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>/{}-_=+*^%$#@!";
    const fontSize = 16;
    const columns = canvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function drawMatrix() {
        ctx.fillStyle = "rgba(10, 10, 10, 0.1)"; // Efecto de rastro
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "#02F4FB"; // Tu color cian
        ctx.font = fontSize + "px monospace";

        for (let i = 0; i < drops.length; i++) {
            const text = characters.charAt(Math.floor(Math.random() * characters.length));
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);

            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
    }

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    setInterval(drawMatrix, 35);

    // --- LÓGICA DE DISCORD ---
    const DISCORD_USER_ID = '734801911760552037';
    const discordElements = {
        avatar: document.getElementById('discordAvatar'),
        statusIndicator: document.getElementById('discordStatusIndicator'),
        subtext: document.getElementById('discordSubtext')
    };

    async function loadDiscordProfile() {
        try {
            const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`);
            if (response.ok) {
                const json = await response.json();
                if (json.success && json.data) {
                    const data = json.data;
                    if (data.discord_user?.avatar) {
                        const extension = data.discord_user.avatar.startsWith('a_') ? 'gif' : 'png';
                        discordElements.avatar.src = `https://cdn.discordapp.com/avatars/${DISCORD_USER_ID}/${data.discord_user.avatar}.${extension}?size=128`;
                     characterCount = 0;}
                    const status = data.discord_status || 'offline';
                    discordElements.statusIndicator.className = `discord-status-indicator ${status}`;
                    const statusMap = { online: 'En línea', idle: 'Ausente', dnd: 'No molestar', offline: 'Desconectado' };
                    let subtextHTML = `<span class="status-dot ${status}"></span> ${statusMap[status]}`;
                    if (data.activities?.length > 0) {
                        const act = data.activities.find(a => a.type === 0) || data.activities.find(a => a.type === 4) || data.activities[0];
                        if (act) {
                            let txt = act.type === 0 ? `Jugando a ${act.name}` : act.type === 2 ? `Escuchando ${act.details}` : act.state;
                            if (txt) subtextHTML += ` • ${txt}`;
                        }
                    }
                    discordElements.subtext.innerHTML = subtextHTML;
                }
            }
        } catch (e) {
            discordElements.statusIndicator.className = 'discord-status-indicator offline';
            discordElements.subtext.innerHTML = `<span class="status-dot offline"></span> Desconectado`;
        }
    }

    const rankLabel = document.getElementById('rank-label');
    const rankSelect = document.getElementById('rank-select');
    rankSelect.addEventListener('change', () => {
        rankLabel.textContent = rankSelect.value.toUpperCase();
        rankLabel.className = `rank ${rankSelect.value}`;
    });

    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mousemove', e => {
            const rect = card.getBoundingClientRect();
            card.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);
            card.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);
        });
    });

    loadDiscordProfile();
    setInterval(loadDiscordProfile, 30000);
});
</script>
</body>
</html>
