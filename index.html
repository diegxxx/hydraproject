<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>HeavxnDev - Portafolio</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
<link href="images/hell.jpg" rel="icon" type="image/x-icon"/>
</head>
<body>
<div id="particles-js"></div>

<div class="container">
<header class="profile-card card">
    <div class="profile-avatar-container">
    <img alt="Minecraft Head" class="profile-avatar" src="https://mc-heads.net/avatar/diegxxx/100" loading="lazy"/>
    </div>
<div class="profile-details">
<div class="nametag" id="nametag">
<span class="nick" id="nick-label">HeavxnDev</span>
<div class="rank-selector">
<select id="rank-select">
<option value="owner">OWNER</option>
<option value="manager">MANAGER</option>
<option value="dev">DEV</option>
</select>
<span class="rank owner" id="rank-label">OWNER</span>
</div>
</div>
<p class="profile-description">Staff &amp; Developer</p>
<div class="discord-status">
<div class="discord-avatar-container">
<img alt="Avatar de Discord" class="discord-icon" id="discordAvatar" src="https://cdn.discordapp.com/embed/avatars/0.png"/>
<div class="discord-status-indicator" id="discordStatusIndicator"></div>
</div>
<div class="discord-subtext" id="discordSubtext">Cargando...</div>
</div>
</div>
</header>
<nav class="nav-grid">
<a class="nav-card card" href="aboutme.html"><i class="fas fa-user"></i><span>Sobre mí</span></a>
<a class="nav-card card" href="projects.html"><i class="fas fa-laptop-code"></i><span>Proyectos</span></a>
<a class="nav-card card" href="servers.html"><i class="fas fa-server"></i><span>Servidores</span></a>
<a class="nav-card card" href="contact.html"><i class="fas fa-envelope"></i><span>Contacto</span></a>
</nav>
<footer class="social-links">
<a class="social-link" href="https://discord.com/users/852696161738293258" target="_blank"><i class="fab fa-discord"></i></a>
<a class="social-link" href="https://github.com/diegxxx" target="_blank"><i class="fab fa-github"></i></a>
</footer>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
    particlesJS('particles-js', {
        particles: {
            number: { value: 90, density: { enable: true, value_area: 800 } },
            color: { value: '#02F4FB' },
            shape: { type: 'circle' },
            opacity: { value: 0.5, random: true },
            size: { value: 4, random: true },
            line_linked: { enable: true, distance: 130, color: '#02F4FB', opacity: 0.3, width: 1 },
            move: { enable: true, speed: 1.8, direction: 'none', random: true, out_mode: 'out' }
        },
        interactivity: {
            detect_on: 'canvas',
            events: { onhover: { enable: true, mode: 'bubble' }, onclick: { enable: true, mode: 'push' } },
            modes: { bubble: { distance: 200, size: 6, duration: 2, opacity: 0.8 }, push: { particles_nb: 4 } }
        },
        retina_detect: true
    });

    const DISCORD_USER_ID = '734801911760552037';
    const discordElements = {
        avatar: document.getElementById('discordAvatar'),
        statusIndicator: document.getElementById('discordStatusIndicator'),
        subtext: document.getElementById('discordSubtext')
    };

    async function loadDiscordProfile() {
        try {
            const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`);
            if (response.ok) {
                const json = await response.json();
                if (json.success && json.data) {
                    const data = json.data;
                    if (data.discord_user?.avatar) {
                        const extension = data.discord_user.avatar.startsWith('a_') ? 'gif' : 'png';
                        discordElements.avatar.src = `https://cdn.discordapp.com/avatars/${DISCORD_USER_ID}/${data.discord_user.avatar}.${extension}?size=128`;
                    }
                    const status = data.discord_status || 'offline';
                    discordElements.statusIndicator.className = `discord-status-indicator ${status}`;
                    const statusMap = { online: 'En línea', idle: 'Ausente', dnd: 'No molestar', offline: 'Desconectado' };
                    let subtextHTML = `<span class="status-dot ${status}"></span> ${statusMap[status]}`;
                    if (data.activities?.length > 0) {
                        const act = data.activities.find(a => a.type === 0) || data.activities.find(a => a.type === 4) || data.activities[0];
                        if (act) {
                            let txt = act.type === 0 ? `Jugando a ${act.name}` : act.type === 2 ? `Escuchando ${act.details}` : act.state;
                            if (txt) subtextHTML += ` • ${txt}`;
                        }
                    }
                    discordElements.subtext.innerHTML = subtextHTML;
                }
            }
        } catch (e) {
            discordElements.statusIndicator.className = 'discord-status-indicator offline';
            discordElements.subtext.innerHTML = `<span class="status-dot offline"></span> Desconectado`;
        }
    }

    const rankLabel = document.getElementById('rank-label');
    const rankSelect = document.getElementById('rank-select');
    rankSelect.addEventListener('change', () => {
        rankLabel.textContent = rankSelect.value.toUpperCase();
        rankLabel.className = `rank ${rankSelect.value}`;
    });

    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mousemove', e => {
            const rect = card.getBoundingClientRect();
            card.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);
            card.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);
        });
    });

    loadDiscordProfile();
    setInterval(loadDiscordProfile, 30000);
});
</script>
</body>
</html>
